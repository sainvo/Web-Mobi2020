{"version":3,"sources":["commands/build/ios/IOSBuilder.ts"],"names":["IOSBuilder","BaseBuilder","run","validateProject","checkForBuildInProgress","options","type","prepareCredentials","publishedExpIds","ensureProjectIsPublished","publicUrl","checkStatusBeforeBuild","build","bundleIdentifier","manifest","sdkVersion","validateIcon","XDLError","utils","checkIfSdkIsSupported","PLATFORMS","IOS","getAppleCtx","appleCtx","apple","setup","authenticate","bestEffortAppleCtx","ctx","appleId","ensureAppleCtx","nonInteractive","parent","confirm","name","message","chalk","green","username","owner","user","experienceName","slug","context","Context","init","projectDir","clearAndRevokeCredentialsIfRequested","skipCredentialsCheck","produceCredentials","e","code","ErrorCodes","NON_INTERACTIVE","log","newLine","link","bold","red","CommandError","credentials","ios","getAllCredentials","appCredentials","getAppCredentials","hasAppleCtx","ensureAppExists","enablePushNotifications","distCertFromParams","SetupIosDist","distributionCert","getDistCert","pushKeyFromParams","SetupIosPush","provisioningProfileFromParams","teamId","SetupIosProvisioningProfile","distCert","projectMetadata","clearCredentials","clearDistCert","clearPushKey","clearPushCert","clearProvisioningProfile","shouldClearAnything","credsToClear","determineCredentialsToClear","shouldRevokeOnApple","revokeCredentials","RemoveIosDist","removeSpecific","pushKey","getPushKey","RemoveIosPush","provisioningProfile","getProvisioningProfile","RemoveProvisioningProfile","pushCert","getPushCert","deletePushCert","credsToClearAll","Boolean","undefined","ensureReleaseExists","platform","icon","err"],"mappings":"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","file":"../../../../commands/build/ios/IOSBuilder.js","sourceRoot":"/expo-cli@3.18.5/src"}